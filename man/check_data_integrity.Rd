% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check.R
\name{check_data_integrity}
\alias{check_data_integrity}
\title{Check Data Integrity for Ingestion}
\usage{
check_data_integrity(
  d,
  dataset_name = "Dataset",
  halt_on_fail = TRUE,
  display_format = "DT",
  verbose = TRUE
)
}
\arguments{
\item{d}{List output from read_csv_files() containing CSV and redefinition data}

\item{dataset_name}{Name of dataset for display purposes (e.g., "NOAA CalCOFI Database")}

\item{halt_on_fail}{Logical, whether to set knitr eval=FALSE on failure (default: TRUE)}

\item{display_format}{Format for displaying changes: "DT" (DataTable), "kable", or "print" (default: "DT")}

\item{verbose}{Logical, print detailed messages (default: TRUE)}
}
\value{
List with:
\itemize{
\item passed: Logical indicating if integrity check passed
\item changes: Full changes object from detect_csv_changes()
\item n_changes: Number of changes detected
\item message: Character string with markdown-formatted message
}
}
\description{
Validates that CSV files match their redefinition metadata before database
ingestion. This function is designed to be called from Quarto notebooks and
will stop notebook execution if mismatches are detected.
}
\details{
The function:
\enumerate{
\item Detects changes between CSV files and redefinitions using detect_csv_changes()
\item Prints summary statistics of detected changes
\item Displays interactive table of changes if any exist
\item Returns appropriate status for notebook control flow
}

When called from a Quarto notebook in an output: asis chunk, this function
will render markdown messages and can control chunk evaluation via knitr options.
}
\examples{
\dontrun{
# In a Quarto notebook chunk with output: asis
d_noaa <- read_csv_files("swfsc.noaa.gov", "calcofi-db")
integrity_check <- check_data_integrity(
  d = d_noaa,
  dataset_name = "NOAA CalCOFI Database"
)

# Continue only if check passed
if (!integrity_check$passed) {
  stop("Data integrity check failed")
}
}
}
\concept{check}
