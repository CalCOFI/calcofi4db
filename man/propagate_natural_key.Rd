% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/wrangle.R
\name{propagate_natural_key}
\alias{propagate_natural_key}
\title{Propagate Key from Parent to Child Table}
\usage{
propagate_natural_key(
  con,
  child_tbl,
  parent_tbl,
  key_col,
  join_col,
  key_type = NULL
)
}
\arguments{
\item{con}{DuckDB connection}

\item{child_tbl}{Name of child table to update}

\item{parent_tbl}{Name of parent table containing the key}

\item{key_col}{Name of the key column to propagate (e.g., "cruise_key", "site_id")}

\item{join_col}{Name of the column to join on (must exist in both tables)}

\item{key_type}{SQL data type for the key ("TEXT" or "INTEGER", default: auto-detect from parent)}
}
\value{
Invisibly returns the connection after adding and populating key column
}
\description{
Copies a key column from a parent table to a child table by joining on
a common column (typically UUID). This is used to populate foreign key
columns before assigning sequential IDs with deterministic sort order.
}
\examples{
\dontrun{
# propagate cruise_key (TEXT) to site table
propagate_natural_key(
  con        = con,
  child_tbl  = "site",
  parent_tbl = "cruise",
  key_col    = "cruise_key",
  join_col   = "cruise_uuid")

# propagate site_id (INTEGER) to tow table
propagate_natural_key(
  con        = con,
  child_tbl  = "tow",
  parent_tbl = "site",
  key_col    = "site_id",
  join_col   = "site_uuid")
}
}
\concept{wrangle}
