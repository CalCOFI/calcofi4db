% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ducklake.R
\name{add_provenance_columns}
\alias{add_provenance_columns}
\title{Add provenance columns to a data frame}
\usage{
add_provenance_columns(
  data,
  source_file,
  source_row_start = 1,
  source_uuid_col = NULL
)
}
\arguments{
\item{data}{Data frame to modify}

\item{source_file}{Path to original CSV file in archive
(e.g., "archive/2026-02-02_121557/swfsc.noaa.gov/calcofi-db/larva.csv")}

\item{source_row_start}{Starting row number (default: 1, typically 2 to skip header)}

\item{source_uuid_col}{Column name containing original UUIDs (optional).
If provided, values are copied to \verb{_source_uuid} column.}
}
\value{
Data frame with added provenance columns:
\itemize{
\item \code{_source_file} (character): Path to original CSV
\item \code{_source_row} (integer): Row number in source file
\item \code{_source_uuid} (character): Original record UUID if available
\item \code{_ingested_at} (POSIXct): When row was ingested (UTC)
}
}
\description{
Helper function to add provenance tracking columns to a data frame
before ingestion. Called internally by \code{ingest_to_working()}.
}
\examples{
\dontrun{
data <- tibble::tibble(x = 1:3, y = letters[1:3])
data_prov <- add_provenance_columns(
  data        = data,
  source_file = "archive/2026-02-02_121557/swfsc.noaa.gov/calcofi-db/test.csv",
  source_row_start = 2)  # skip header

# with source uuid column
data <- tibble::tibble(x = 1:3, uuid = c("a1", "b2", "c3"))
data_prov <- add_provenance_columns(
  data            = data,
  source_file     = "test.csv",
  source_uuid_col = "uuid")
}
}
\concept{ducklake}
