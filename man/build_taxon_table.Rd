% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/taxonomy.R
\name{build_taxon_table}
\alias{build_taxon_table}
\title{Build Taxonomic Hierarchy Table from WoRMS}
\usage{
build_taxon_table(
  con,
  species_tbl = "species",
  taxon_tbl = "taxon",
  include_itis = TRUE,
  batch_size = 50
)
}
\arguments{
\item{con}{DBI connection to DuckDB}

\item{species_tbl}{character; name of species table with worms_id column}

\item{taxon_tbl}{character; name for output taxon table (default "taxon")}

\item{include_itis}{logical; also fetch ITIS classification (default TRUE)}

\item{batch_size}{integer; number of species per API batch (default 50)}
}
\value{
tibble of taxon hierarchy rows written to con
}
\description{
For each unique \code{worms_id} in the species table, retrieves the full
classification from WoRMS (kingdom, phylum, class, order, family,
genus, species) and stores it in a taxon table. Optionally also
fetches ITIS classification.
}
\details{
Also creates a \code{taxa_rank} lookup table with rank ordering consistent
with the WoRMS taxonomy hierarchy.
}
\examples{
\dontrun{
con <- get_duckdb_con("calcofi.duckdb")
taxon_rows <- build_taxon_table(con)
}
}
\concept{taxonomy}
